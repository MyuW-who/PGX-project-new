<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Patient Dashboard</title>
  <link rel="stylesheet" href="./css/information.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <div class="container">
    <aside class="sidebar">
      <h2 class="logo">Logo</h2>
      <ul>
        <li id="dashboard-btn">Dashboard</li>
        <li>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</li>
        <li class="active">‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</li>
        <li id="adminpage-btn">Admin Page</li>
      </ul>
    </aside>

    <main class="main-content">
      <header class="page-header">
        <h2>Case Management</h2>
        <div class="header-buttons">
          <button id="themeToggle" class="icon-btn" title="‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ò‡∏µ‡∏°">
            <i class="fa fa-moon"></i>
          </button>
          <button id="langToggle" class="lang-btn" title="‡∏™‡∏•‡∏±‡∏ö‡∏†‡∏≤‡∏©‡∏≤">TH</button>
          <div class="dropdown">
            <button class="dropbtn" id="dropdownBtn">
              <i class="fa fa-user-circle"></i>
              Admin
              <i class="fa fa-caret-down"></i>
            </button>
            <div id="dropdownMenu" class="dropdown-content">
              <a href="#">Home</a>
              <a href="#">About</a>
              <a href="#" id="logout">Logout</a>
            </div>
          </div>
        </div>
      </header>

      <div class="toolbar">
        <div class="toolbar-left">
          <input type="text" id="searchInput" placeholder="üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢, HN ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏•‡∏Ç‡πÄ‡∏Ñ‡∏™..." />
        </div>
        <div class="toolbar-right">
          <select id="tatFilter">
            <option value="all">TAT ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</option>
            <option value="pre-analytic">Pre-analytic</option>
            <option value="analytic">Analytic</option>
            <option value="post-analytic">Post-analytic</option>
          </select>
          <button id="scanBarcodeBtn" class="btn primary">
            <i class="fa fa-barcode"></i>
            ‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î
          </button>
        </div>
      </div>

      <section class="case-summary">
        <article class="summary-card">
          <div>
            <h4>‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h4>
            <p class="summary-count" id="countTotal">0</p>
          </div>
          <i class="fa fa-users"></i>
        </article>
        <article class="summary-card status-pre-analytic">
          <div>
            <h4>Pre-analytic</h4>
            <p class="summary-count" id="countPre">0</p>
          </div>
          <i class="fa fa-vials"></i>
        </article>
        <article class="summary-card status-analytic">
          <div>
            <h4>Analytic</h4>
            <p class="summary-count" id="countAnalytic">0</p>
          </div>
          <i class="fa fa-dna"></i>
        </article>
        <article class="summary-card status-post-analytic">
          <div>
            <h4>Post-analytic</h4>
            <p class="summary-count" id="countPost">0</p>
          </div>
          <i class="fa fa-clipboard-check"></i>
        </article>
      </section>

      <section class="case-table">
        <div class="table-wrapper">
          <table id="caseTable">
            <thead>
              <tr>
                <th>‡πÄ‡∏•‡∏Ç‡πÄ‡∏Ñ‡∏™ / HN</th>
                <th>‡∏ä‡∏∑‡πà‡∏≠ - ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• / ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢</th>
                <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏™‡πà‡∏á‡∏ï‡∏£‡∏ß‡∏à</th>
                <th>‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</th>
                <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ TAT</th>
                <th></th>
              </tr>
            </thead>
            <tbody id="caseTableBody"></tbody>
          </table>
          <div class="table-empty hidden" id="caseTableEmpty">
            ‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
          </div>
        </div>
      </section>

      <section id="patientDetail" class="detail hidden">
        <div class="detail-header">
          <div>
            <h3 id="detailName">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h3>
            <p id="detailMeta"></p>
          </div>
          <div class="detail-actions">
            <button class="btn outline" id="printLabelBtn">
              <i class="fa fa-print"></i>
              ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏â‡∏•‡∏≤‡∏Å‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î / QR
            </button>
            <button class="btn outline" id="generateReportBtn">
              <i class="fa fa-file-pdf"></i>
              ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô (PDF)
            </button>
            <button class="icon-btn close-detail" id="closeDetailBtn" aria-label="‡∏õ‡∏¥‡∏î‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î">
              <i class="fa fa-times"></i>
            </button>
          </div>
        </div>

        <div class="detail-grid">
          <article class="card">
            <h4>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h4>
            <ul id="patientBasicInfo" class="info-list"></ul>
            <div class="info-notes">
              <h5>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</h5>
              <p id="detailNotes">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</p>
            </div>
          </article>

          <article class="card">
            <h4>Timeline TAT</h4>
            <ul id="tatTimeline" class="timeline"></ul>
          </article>
        </div>

        <article class="card">
          <h4>‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏û‡∏±‡∏ô‡∏ò‡∏∏‡∏Å‡∏£‡∏£‡∏° (Genotype)</h4>
          <div class="table-responsive">
            <table>
              <thead>
                <tr>
                  <th>Gene</th>
                  <th>Allele</th>
                  <th>Phenotype</th>
                </tr>
              </thead>
              <tbody id="genotypeRows"></tbody>
            </table>
          </div>
        </article>

        <article class="card">
          <h4>‡πÇ‡∏°‡∏î‡∏π‡∏•‡πÅ‡∏õ‡∏•‡∏ú‡∏• (CDS) ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h4>
          <div id="cdsContent" class="cds-content"></div>
        </article>

        <article class="card">
          <div class="card-header">
            <h4>‡πÇ‡∏°‡∏î‡∏π‡∏•‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏° TDM</h4>
            <button class="btn ghost" id="addTdmBtn">
              <i class="fa fa-plus"></i>
              ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏• TDM
            </button>
          </div>
          <div class="table-responsive">
            <table>
              <thead>
                <tr>
                  <th>‡∏¢‡∏≤</th>
                  <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
                  <th>‡∏ú‡∏•</th>
                  <th>‡∏ä‡πà‡∏ß‡∏á‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢</th>
                  <th>‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</th>
                </tr>
              </thead>
              <tbody id="tdmRows"></tbody>
            </table>
          </div>
        </article>

        <article class="card">
          <div class="card-header">
            <h4>‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•</h4>
            <div class="card-actions">
              <button class="btn ghost" id="createReportBtn">
                <i class="fa fa-file-medical"></i>
                ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà
              </button>
              <button class="btn ghost" id="viewHtmlReportBtn">
                <i class="fa fa-eye"></i>
                ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô HTML
              </button>
            </div>
          </div>
          <ul id="reportList" class="item-list"></ul>
        </article>

        <article class="card">
          <div class="card-header">
            <h4>‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ e-Consent</h4>
            <button class="btn ghost" id="addConsentBtn">
              <i class="fa fa-upload"></i>
              ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î e-Consent
            </button>
          </div>
          <ul id="consentList" class="item-list"></ul>
        </article>

        <article class="card">
          <h4>Log ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h4>
          <ul id="auditLog" class="log-list"></ul>
        </article>
      </section>
    </main>
  </div>

  <div class="modal-overlay hidden" id="patientModal" aria-hidden="true">
    <div class="modal">
      <header class="modal-header">
        <h3>‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡∏õ‡πà‡∏ß‡∏¢</h3>
        <button class="icon-btn" id="closePatientModal" aria-label="‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á">
          <i class="fa fa-times"></i>
        </button>
      </header>
      <form id="patientForm" class="modal-body">
        <div class="form-grid">
          <label>
            ‡πÄ‡∏•‡∏Ç‡πÄ‡∏Ñ‡∏™ (‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
            <input type="text" value="‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥" disabled />
          </label>
          <label>
            HN *
            <input type="text" name="hn" required />
          </label>
          <label>
            ‡∏ä‡∏∑‡πà‡∏≠ *
            <input type="text" name="firstName" required />
          </label>
          <label>
            ‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *
            <input type="text" name="lastName" required />
          </label>
          <label>
            ‡πÄ‡∏û‡∏® *
            <select name="gender" required>
              <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏û‡∏®</option>
              <option value="‡∏´‡∏ç‡∏¥‡∏á">‡∏´‡∏ç‡∏¥‡∏á</option>
              <option value="‡∏ä‡∏≤‡∏¢">‡∏ä‡∏≤‡∏¢</option>
              <option value="‡∏≠‡∏∑‡πà‡∏ô ‡πÜ">‡∏≠‡∏∑‡πà‡∏ô ‡πÜ</option>
            </select>
          </label>
          <label>
            ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î *
            <input type="date" name="dob" required />
          </label>
          <label>
            ‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå
            <input type="tel" name="phone" />
          </label>
          <label>
            ‡πÅ‡∏û‡∏ó‡∏¢‡πå‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏• *
            <input type="text" name="doctor" required />
          </label>
          <label>
            ‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡∏ô‡∏¥‡∏à‡∏â‡∏±‡∏¢‡∏´‡∏•‡∏±‡∏Å
            <input type="text" name="diagnosis" />
          </label>
          <label>
            ‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏™‡∏¥‡πà‡∏á‡∏™‡πà‡∏á‡∏ï‡∏£‡∏ß‡∏à *
            <input type="text" name="sampleType" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏•‡∏∑‡∏≠‡∏î, ‡∏ô‡πâ‡∏≥‡πÑ‡∏Ç‡∏™‡∏±‡∏ô‡∏´‡∏•‡∏±‡∏á" required />
          </label>
          <label>
            ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏™‡πà‡∏á‡∏ï‡∏£‡∏ß‡∏à *
            <input type="date" name="collectedAt" required />
          </label>
          <label>
            ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞ TAT ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô *
            <select name="tatStatus" required>
              <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</option>
              <option value="pre-analytic">Pre-analytic</option>
              <option value="analytic">Analytic</option>
              <option value="post-analytic">Post-analytic</option>
            </select>
          </label>
          <label class="full-width">
            ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏
            <textarea name="notes" rows="3" placeholder="‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏£‡∏£‡∏∞‡∏ß‡∏±‡∏á"></textarea>
          </label>
        </div>
        <small class="form-hint">* ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏Å</small>
        <footer class="modal-footer">
          <button type="button" class="btn ghost" id="cancelPatientModal">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
          <button type="button" class="btn outline" id="saveAndPrintBtn">
            <i class="fa fa-print"></i>
            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡∏∞‡∏û‡∏¥‡∏°‡∏û‡πå‡πÉ‡∏ö‡∏™‡∏±‡πà‡∏á‡∏ï‡∏£‡∏ß‡∏à (PDF)
          </button>
          <button type="submit" class="btn primary">
            <i class="fa fa-save"></i>
            ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
          </button>
        </footer>
      </form>
    </div>
  </div>

  <div class="modal-overlay hidden" id="scannerOverlay" aria-hidden="true">
    <div class="modal scanner-modal">
      <header class="modal-header">
        <h3>‡∏™‡πÅ‡∏Å‡∏ô‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î</h3>
        <button class="icon-btn" id="closeScannerBtn" aria-label="‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á">
          <i class="fa fa-times"></i>
        </button>
      </header>
      <div class="scanner-body">
        <video id="scannerPreview" autoplay muted playsinline></video>
        <p class="muted">‡∏à‡∏±‡∏î‡∏ö‡∏≤‡∏£‡πå‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏´‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏Å‡∏£‡∏≠‡∏ö‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡πÅ‡∏Å‡∏ô</p>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/quagga@0.12.1/dist/quagga.min.js"></script>
  <script src="./js/information.js"></script>
</body>
</html>
